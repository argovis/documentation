

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Fast Angular Builds &mdash; argovis  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pull Requests, Git &amp; GitHub" href="pull_requests_and_github.html" />
    <link rel="prev" title="Setting Up Argovis" href="../getting_started/set_up_dev_environment.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> argovis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/set_up_dev_environment.html">Setting Up Argovis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Tools &amp; Techniques</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Fast Angular Builds</a></li>
<li class="toctree-l1"><a class="reference internal" href="pull_requests_and_github.html">Pull Requests, Git &amp; GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="merge_conflicts.html">Dealing With Merge Conflicts</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_branches.html">Using Branches</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Disaster Recovery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../disaster_recovery/restore_a_mongo_collection.html">Restore Mongo from Backup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Special Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/connecting_to_the_container_network.html">Connecting to the Container Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/goship-demo.html">Goship Demo Rebuild</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">argovis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Fast Angular Builds</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/dev_tools/fast_development_builds.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fast-angular-builds">
<span id="id1"></span><h1>Fast Angular Builds<a class="headerlink" href="#fast-angular-builds" title="Permalink to this headline">¶</a></h1>
<p>Building the angular frontend container can be slow, which is an impediment to rapid iteration and development. Instead of building from scratch, Angular can be set to watch files as they change, and perform <em>incremental rebuilds</em> which are much faster. Follow the steps below to set this up.</p>
<ol class="arabic">
<li><p>Start up a local version of Argovis, as described in <a class="reference internal" href="../getting_started/set_up_dev_environment.html#setup-argovis"><span class="std std-ref">Setting Up Argovis</span></a>.</p></li>
<li><p>Identify the container network your containers are connected to, as described in <a class="reference internal" href="../special_topics/connecting_to_the_container_network.html#simple-container-connection"><span class="std std-ref">Method 1: Simple Container</span></a>.</p></li>
<li><p>In your terminal, move to the root of your <code class="docutils literal notranslate"><span class="pre">argovisNg</span></code> directory.</p></li>
<li><p>Launch a development environment for Argovis, making sure to sub in the name of the network you just found:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>argovisNg $ docker container run <span class="se">\</span>
    -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/src:/usr/src/ng_argovis/src <span class="se">\</span>
    --network &lt;argovis network name&gt; <span class="se">\</span>
    -p <span class="m">3001</span>:3000 <span class="se">\</span>
    -d argovis/argovis-express:dev
</pre></div>
</div>
</li>
</ol>
<p>For the curious, these flags are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">$(pwd)/src:/usr/src/ng_argovis/src</span></code>: mount the directory that you’re currently in (the root of your <code class="docutils literal notranslate"><span class="pre">argovisNg</span></code>) to where that code is supposed to live in the argovisNg web frontend container.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--network</span> <span class="pre">&lt;argovis</span> <span class="pre">network</span> <span class="pre">name&gt;</span></code>: attach this container to the same network as the running version of the app (so it can access the mongodb database).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">3001:3000</span></code>: make this development version available at <code class="docutils literal notranslate"><span class="pre">localhost:3001</span></code>.</p></li>
</ul>
</div></blockquote>
<ol class="arabic" start="5">
<li><p>After starting the container, a long string will be returned to the terminal. This is the container ID for the container you just started. Use the first few characters to run the Angular auto-rebuilder inside this container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>argovisNg $ docker container <span class="nb">exec</span> -it &lt;container ID&gt; ng build --watch<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</li>
</ol>
<p>This takes several minutes to spin up, but you only need to do it once; once it’s done starting, it’ll look like:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chunk <span class="o">{</span>ext-js-wasm-wasm-test-pkg-wasm_test<span class="o">}</span> ext-js-wasm-wasm-test-pkg-wasm_test.js, b2c7ea01ec0169037ab2.module.wasm, ext-js-wasm-wasm-test-pkg-wasm_test.js.map <span class="o">(</span>ext-js-wasm-wasm-test-pkg-wasm_test<span class="o">)</span> <span class="m">2</span>.82 kB  <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>main<span class="o">}</span> main.js, main.js.map <span class="o">(</span>main<span class="o">)</span> <span class="m">1</span>.7 MB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>polyfills<span class="o">}</span> polyfills.js, polyfills.js.map <span class="o">(</span>polyfills<span class="o">)</span> <span class="m">721</span> kB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>polyfills-es5<span class="o">}</span> polyfills-es5.js, polyfills-es5.js.map <span class="o">(</span>polyfills-es5<span class="o">)</span> <span class="m">794</span> kB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>runtime<span class="o">}</span> runtime.js, runtime.js.map <span class="o">(</span>runtime<span class="o">)</span> <span class="m">11</span>.2 kB <span class="o">[</span>entry<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>scripts<span class="o">}</span> scripts.js, scripts.js.map <span class="o">(</span>scripts<span class="o">)</span> <span class="m">535</span> kB <span class="o">[</span>entry<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>styles<span class="o">}</span> styles.js, styles.js.map <span class="o">(</span>styles<span class="o">)</span> <span class="m">690</span> kB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
chunk <span class="o">{</span>vendor<span class="o">}</span> vendor.js, vendor.js.map <span class="o">(</span>vendor<span class="o">)</span> <span class="m">21</span>.2 MB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
Date: <span class="m">2021</span>-09-12T05:46:01.476Z - Hash: 907431edfbafdcca7fbc - Time: 102955ms
</pre></div>
</div>
</div></blockquote>
<p>Leave this terminal tab alone while you work. From here, changing any file in the <code class="docutils literal notranslate"><span class="pre">argovisNg</span></code> source directory you mounted into your development container will automatically trigger a partial build when you save the changes to disk. In the terminal running your builder, each change build will be reported similarly to:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Date: <span class="m">2021</span>-09-12T05:50:10.507Z - Hash: 0e05156071c776093206
<span class="m">7</span> unchanged chunks
chunk <span class="o">{</span>main<span class="o">}</span> main.js, main.js.map <span class="o">(</span>main<span class="o">)</span> <span class="m">1</span>.7 MB <span class="o">[</span>initial<span class="o">]</span> <span class="o">[</span>rendered<span class="o">]</span>
Time: 5544ms
</pre></div>
</div>
</div></blockquote>
<p>Remember - the version you’re editing is being served at <code class="docutils literal notranslate"><span class="pre">http://localhost:3001</span></code>.</p>
<ol class="arabic simple" start="6">
<li><p>When you’re done for the day, hit <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code> in the tab running the auto builder to kill it, and tear down the app with <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">down</span></code> as usual. Do a regular build per the instructions in <a class="reference internal" href="../getting_started/set_up_dev_environment.html#building-dev-versions"><span class="std std-ref">Building Dev Versions</span></a> to confirm things still look good after a full build.</p></li>
</ol>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="pull_requests_and_github.html" class="btn btn-neutral float-right" title="Pull Requests, Git &amp; GitHub" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../getting_started/set_up_dev_environment.html" class="btn btn-neutral float-left" title="Setting Up Argovis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Argovis Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>