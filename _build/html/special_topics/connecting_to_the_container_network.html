

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Connecting to the Container Network &mdash; argovis  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Goship Demo Rebuild" href="goship-demo.html" />
    <link rel="prev" title="Restore Mongo from Backup" href="../disaster_recovery/restore_a_mongo_collection.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> argovis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/set_up_dev_environment.html">Setting Up Argovis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Disaster Recovery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../disaster_recovery/restore_a_mongo_collection.html">Restore Mongo from Backup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Special Topics</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Connecting to the Container Network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#method-1-simple-container">Method 1: Simple Container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#method-2-extra-service">Method 2: Extra Service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goship-demo.html">Goship Demo Rebuild</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">argovis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Connecting to the Container Network</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/special_topics/connecting_to_the_container_network.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="connecting-to-the-container-network">
<h1>Connecting to the Container Network<a class="headerlink" href="#connecting-to-the-container-network" title="Permalink to this headline">¶</a></h1>
<p>When you launch Argovis, docker-compose makes a container network that all the application containers can communicate over. There are some instances when you might want to attach a new container to the existing network:</p>
<blockquote>
<div><ul class="simple">
<li><p>You have an experimental version of the web app or API, and want it to be able to communicate with your existing mongodb container instance.</p></li>
<li><p>You have some containerized tooling, like diagnostic or performance tools, that you’d like to network to your existing deployment.</p></li>
<li><p>Many others.</p></li>
</ul>
<p>In this tutorial, you’ll learn two ways to attach a new container to an existing container network. We assume you have argovis up and running before beginning.</p>
</div></blockquote>
<div class="section" id="method-1-simple-container">
<h2>Method 1: Simple Container<a class="headerlink" href="#method-1-simple-container" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Suppose you want to connect a new container to your mongodb container. Start by listing your containers to get the ID of your mongodb container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~ $ docker container ls

    CONTAINER ID   IMAGE        ...
    c5f477eb4a83   mongo:4.2.3  ...
</pre></div>
</div>
</li>
<li><p>Inspect your container; you’re looking for the <code class="docutils literal notranslate"><span class="pre">Networks</span></code> block at the bottom:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~ $ docker container inspect &lt;mongo container ID&gt;

      ...
      <span class="s2">&quot;Networks&quot;</span>: <span class="o">{</span>
          <span class="s2">&quot;argovisng_default&quot;</span>: <span class="o">{</span>
              <span class="s2">&quot;IPAMConfig&quot;</span>: null,
              <span class="s2">&quot;Links&quot;</span>: null,
              <span class="s2">&quot;Aliases&quot;</span>: <span class="o">[</span>
                  <span class="s2">&quot;database&quot;</span>,
                  <span class="s2">&quot;c5f477eb4a83&quot;</span>
              <span class="o">]</span>,
              <span class="s2">&quot;NetworkID&quot;</span>: <span class="s2">&quot;9a6079f99776c7470b1f302cfc88a3b73461b4f881546439e101966b7e773665&quot;</span>,
              <span class="s2">&quot;EndpointID&quot;</span>: <span class="s2">&quot;5fd8da86a46f1c351299f4e91c3d05f76405dbd5e60d1b145bde38163bc0ee5d&quot;</span>,
              <span class="s2">&quot;Gateway&quot;</span>: <span class="s2">&quot;172.18.0.1&quot;</span>,
              <span class="s2">&quot;IPAddress&quot;</span>: <span class="s2">&quot;172.18.0.2&quot;</span>,
              <span class="s2">&quot;IPPrefixLen&quot;</span>: <span class="m">16</span>,
              <span class="s2">&quot;IPv6Gateway&quot;</span>: <span class="s2">&quot;&quot;</span>,
              <span class="s2">&quot;GlobalIPv6Address&quot;</span>: <span class="s2">&quot;&quot;</span>,
              <span class="s2">&quot;GlobalIPv6PrefixLen&quot;</span>: <span class="m">0</span>,
              <span class="s2">&quot;MacAddress&quot;</span>: <span class="s2">&quot;02:42:ac:12:00:02&quot;</span>,
              <span class="s2">&quot;DriverOpts&quot;</span>: null
          <span class="o">}</span>
      <span class="o">}</span>
</pre></div>
</div>
</li>
</ol>
<p>The name of the network your mongodb container is attached to is the very first key: <code class="docutils literal notranslate"><span class="pre">argovisng_default</span></code> in this case. You might have noticed docker-compose create this network when you first stood up your application.</p>
<ol class="arabic" start="3">
<li><p>Launch a container attached to this network. You can use any container image you like, but for this simple example we’ll just make another copy of argovis’ web tier, and show that it’s communicating with the database:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~ $ docker container run -d --network argovisng_default <span class="se">\</span>
    -p <span class="m">3030</span>:3000 argovis/argo-express:dev
</pre></div>
</div>
</li>
</ol>
<p>At this point you should be able to visit this new copy of Argovis on port 3030, and search for some data, showing that it is successfully connected to your database container. Of course, you’ll be using a different container image to suit your purposes, but the syntax for connecting to the correct container network is the same.</p>
</div>
<div class="section" id="method-2-extra-service">
<h2>Method 2: Extra Service<a class="headerlink" href="#method-2-extra-service" title="Permalink to this headline">¶</a></h2>
<p>Connecting a single container to your container network is usually appropriate for quick tasks, like using some containerized tooling to check network performance; if you want something a bit more permanent, you can add an extra service to Argovis’ docker-compose file.</p>
<ol class="arabic">
<li><p>Open up <code class="docutils literal notranslate"><span class="pre">argovisNg/docker-compose.yml</span></code>, and define an extra service therein. An example might be the <code class="docutils literal notranslate"><span class="pre">demoservice</span></code> in the example below, which will do essentially the same thing as the single-container example above (note the usual service definitions are suppressed for clarity):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">argo-express</span><span class="p">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="nt">demoservice</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argovis/argo-express:dev</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&#39;3030:3000&#39;</span>
  <span class="nt">database</span><span class="p">:</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</li>
<li><p>Restart your app, with <code class="docutils literal notranslate"><span class="pre">docker-compose</span> <span class="pre">down</span></code> / <code class="docutils literal notranslate"><span class="pre">up</span></code> as usual. When it’s back up, there will be a container corresponding to your <code class="docutils literal notranslate"><span class="pre">demoservice</span></code> which is able to use the container network to communicate with all other application containers.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="goship-demo.html" class="btn btn-neutral float-right" title="Goship Demo Rebuild" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../disaster_recovery/restore_a_mongo_collection.html" class="btn btn-neutral float-left" title="Restore Mongo from Backup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Argovis Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>