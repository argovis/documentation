

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Argovis data schema &mdash; argovis  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Database Resourcing &amp; Deployment" href="db_ops.html" />
    <link rel="prev" title="Getting started with Argovis’ data" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> argovis
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">0. Welcome</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Argovis Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#argovis-engineering-at-a-glance">Argovis engineering at a glance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#documentation-conventions">Documentation conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#contributing">Contributing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#table-of-contents">Table of contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="getting_started.html">Getting started with Argovis’ data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Argovis data schema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-heritable-generic-schema">A heritable generic schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-point-schema">Generic Point Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#argo-schema-extension">Argo Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cchdo-schema-extension">CCHDO Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drifter-schema-extension">Drifter Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tropical-cyclone-schema-extension">Tropical Cyclone Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gridded-product-schema-extension">Gridded Product Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#easy-ocean-gridded-schema-extension">Easy Ocean Gridded Schema Extension</a></li>
<li class="toctree-l4"><a class="reference internal" href="#argone-argo-float-forecast-data">ARGONE Argo float forecast data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#argo-trajectory-data">Argo trajectory data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-timeseries-schema">Generic Timeseries Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#noaa-sea-surface-temperature-timeseries">NOAA sea surface temperature timeseries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copernicus-sea-level-anomaly-timeseries">Copernicus sea level anomaly timeseries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remss-ccmp-wind-vector-timeseries">REMSS CCMP wind vector timeseries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-extended-objects-schema">Generic Extended Objects Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#atmospheric-river-extended-objects">Atmospheric river extended objects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="db_ops.html">Database Resourcing &amp; Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="adding_new_data.html">Adding a new dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="argo.html">Managing Argo Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/getting_started.html">Getting started with Argovis API development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/adding_new_endpoints.html">Adding new API routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/rate_limitation.html">API rate limitation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/ops_config.html">API deployment configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/hit_logging.html">API hit logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/deployment.html">Argovis Deployment Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/drifters-aws.html">Deploy Global Drifter Program database on AWS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/openshift-ssl.html">Openshift SSL Certificate Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ops/prometheus.html">Prometheus metrics for Argovis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/intro.html">Appendix: Archival Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/pull_requests_and_github.html">Pull Requests, Git &amp; GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/merge_conflicts.html">Dealing With Merge Conflicts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/using_branches.html">Using Branches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/connecting_to_the_container_network.html">Connecting to the Container Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/goship-demo.html">Goship Demo Rebuild</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/api_usage.html">Argovis API Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../special_topics/performance_testing.html">Performance Testing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">1. Data &amp; Database</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with Argovis’ data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Argovis data schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-heritable-generic-schema">A heritable generic schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-read-this-schema">How to read this schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-enforcement-population">Schema enforcement &amp; population</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-point-schema">Generic Point Schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generic-data-schema">Generic Data Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-metadata-schema">Generic Metadata Schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#argo-schema-extension">Argo Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generic-metadata-division">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id-construction"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argo-specific-data-record-fields">Argo-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argo-specific-metadata-record-fields">Argo-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cchdo-schema-extension">CCHDO Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cchdo-specific-data-record-fields">CCHDO-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cchdo-specific-metadata-record-fields">CCHDO-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#drifter-schema-extension">Drifter Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drifter-specific-data-record-fields">Drifter-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drifter-specific-metadata-record-fields">Drifter-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tropical-cyclone-schema-extension">Tropical Cyclone Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tc-specific-data-record-fields">TC-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tc-specific-metadata-record-fields">TC-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gridded-product-schema-extension">Gridded Product Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id12">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grid-specific-data-record-fields">Grid-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grid-specific-metadata-record-fields">Grid-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#easy-ocean-gridded-schema-extension">Easy Ocean Gridded Schema Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id15">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#easy-ocean-specific-data-record-fields">Easy Ocean-Specific Data Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#easy-ocean-specific-metadata-record-fields">Easy Ocean-Specific Metadata Record Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#argone-argo-float-forecast-data">ARGONE Argo float forecast data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id18">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argone-specific-data-record-fields">ARGONE-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argone-specific-metadata-record-fields">ARGONE-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#argo-trajectory-data">Argo trajectory data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id21">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argo-trajectory-specific-data-record-fields">Argo trajectory-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argo-trajectory-specific-metadata-record-fields">Argo trajectory-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-timeseries-schema">Generic Timeseries Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#noaa-sea-surface-temperature-timeseries">NOAA sea surface temperature timeseries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id24">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#noaa-sst-specific-data-record-fields">NOAA sst-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#noaa-sst-specific-metadata-record-fields">NOAA sst-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#copernicus-sea-level-anomaly-timeseries">Copernicus sea level anomaly timeseries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id27">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copernicus-sla-specific-data-record-fields">Copernicus sla-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copernicus-sla-specific-metadata-record-fields">Copernicus sla-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#remss-ccmp-wind-vector-timeseries">REMSS CCMP wind vector timeseries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id31">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ccmp-wind-specific-data-record-fields">CCMP wind-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ccmp-wind-specific-metadata-record-fields">CCMP wind-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generic-extended-objects-schema">Generic Extended Objects Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#atmospheric-river-extended-objects">Atmospheric river extended objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id35">Generic Metadata Division</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36"><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ar-specific-data-record-fields">AR-specific data record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ar-specific-metadata-record-fields">AR-specific metadata record fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="db_ops.html">Database Resourcing &amp; Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_new_data.html">Adding a new dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="argo.html">Managing Argo Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">2. API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/getting_started.html">Getting started with Argovis API development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/adding_new_endpoints.html">Adding new API routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/rate_limitation.html">API rate limitation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ops_config.html">API deployment configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/hit_logging.html">API hit logging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">4. Deployment &amp; operations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/deployment.html">Argovis Deployment Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/drifters-aws.html">Deploy Global Drifter Program database on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/openshift-ssl.html">Openshift SSL Certificate Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/prometheus.html">Prometheus metrics for Argovis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix: Archival Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/intro.html">Appendix: Archival Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/pull_requests_and_github.html">Pull Requests, Git &amp; GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/merge_conflicts.html">Dealing With Merge Conflicts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/using_branches.html">Using Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/connecting_to_the_container_network.html">Connecting to the Container Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/goship-demo.html">Goship Demo Rebuild</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/api_usage.html">Argovis API Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../special_topics/performance_testing.html">Performance Testing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">argovis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Argovis data schema</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/database/schema.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="argovis-data-schema">
<span id="schema"></span><h1>Argovis data schema<a class="headerlink" href="#argovis-data-schema" title="Permalink to this headline">¶</a></h1>
<p>All data indexed by Argovis follows the schema described in this document. The purpose of this schema is to standardize the representation of profile-, grid-, and sea surface-type datasets to promote their interoperability and underwrite a standardized API to serve them all.</p>
<div class="admonition-the-last-word admonition">
<p class="admonition-title">The Last Word</p>
<p>In the event of conflicts in schema definition, the implementation at <a class="reference external" href="https://github.com/argovis/db-schema">https://github.com/argovis/db-schema</a> is to be taken as correct above all others.</p>
</div>
<div class="section" id="a-heritable-generic-schema">
<h2>A heritable generic schema<a class="headerlink" href="#a-heritable-generic-schema" title="Permalink to this headline">¶</a></h2>
<p>Argovis schema are designed to inherited from a semi-well-defined generic schema that structures the most universal aspects of earth system data in a regular fashion, thereby standardizing the commonalities between these dataset representations, while preserving the ability for individual datasets to represent unique data. All datasets in Argovis are thus represented by a pair of collections, one for data, and one for metadata, where the dataset-specific records in each inherit from the generic data and metadata schemas respectively. This can be visualized as per:</p>
<img alt="../_images/schema.png" src="../_images/schema.png" />
<p>In other words, <em>all</em> data records for <em>all</em> datasets include the fields defined below in the generic data record section, and similarly for metadata records. Each dataset can append additional fields to each to capture their specifics; each dataset supported by Argovis has its extension specifics detailed in subsequent sections of this document.</p>
<div class="section" id="how-to-read-this-schema">
<h3>How to read this schema<a class="headerlink" href="#how-to-read-this-schema" title="Permalink to this headline">¶</a></h3>
<p>Each entry in the schema fragments below contain a few keys:</p>
<ul class="simple">
<li><p><strong>required:</strong> whether or not this attribute can be omitted; “case” indicates case-by-case decisions for different datasets</p></li>
<li><p><strong>type:</strong> the primitive type,  format,  or object description of a valid entry for this field</p></li>
<li><p><strong>description:</strong> short comment on what this variable is</p></li>
<li><p><strong>fill value</strong> (optional): what this should be filled by if absent</p></li>
<li><p><strong>current vocabulary</strong> (optional): current set of possible values for this key,  with explanations as required.</p></li>
</ul>
</div>
<div class="section" id="schema-enforcement-population">
<h3>Schema enforcement &amp; population<a class="headerlink" href="#schema-enforcement-population" title="Permalink to this headline">¶</a></h3>
<p>Argovis uses MongoDB as its backend. All datasets have their data and metadata schema defined in <a class="reference external" href="https://github.com/argovis/db-schema">https://github.com/argovis/db-schema</a>, which includes enforcement of these schema when uploaded to mongodb; therefore, the schema implementation in that code should be considered the most reliable document of our schema.</p>
</div>
</div>
<div class="section" id="generic-point-schema">
<h2>Generic Point Schema<a class="headerlink" href="#generic-point-schema" title="Permalink to this headline">¶</a></h2>
<p>As noted above, generic schema form the basis of all schema in Argovis; this section describes the minimum viable information needed to populate these schema for our point-like datasets. Subsequent sections describe how specific datasets extend and implement these core definitions.</p>
<div class="section" id="generic-data-schema">
<h3>Generic Data Schema<a class="headerlink" href="#generic-data-schema" title="Permalink to this headline">¶</a></h3>
<p>In general, data records are intended to represent data that is unique or frequently changing per longitude / latitude / timestamp triple, in order to support efficient temporospatial indexing of these records in Mongodb. All data records contain the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_id</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> unique record identifier that encodes something meaningful, such as measurement order per platform.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array</p></li>
<li><p><strong>description:</strong> foreign key(s) that matches the <code class="docutils literal notranslate"><span class="pre">_id</span></code> of the corresponding metadata record. Preferentially chosen to encode something physically meaningful that corresponds to metadata groupings, like Argo platform ID. If array references exactly one metadata document, then that metadata doc applies to all values in <code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code> for this data document; if <code class="docutils literal notranslate"><span class="pre">metadata</span></code> lists more than one element, they are to be interpreted as per-item in <code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code> (ie, <code class="docutils literal notranslate"><span class="pre">metadata[i]</span></code> is the metadata corresponding to <code class="docutils literal notranslate"><span class="pre">data_info[0][i]</span></code>).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> geojson Point object</p></li>
<li><p><strong>description:</strong> geojson Point tagging the lon/lat of this record.</p></li>
<li><p><strong>fill value:</strong> <code class="docutils literal notranslate"><span class="pre">{&quot;type&quot;:</span> <span class="pre">&quot;Point&quot;,</span>&#160; <span class="pre">&quot;coordinates&quot;:</span> <span class="pre">[0,</span>&#160; <span class="pre">-90]}</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">basin</span></code></p>
<ul>
<li><p><strong>required:</strong> case</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> integer index of basin.</p></li>
<li><p><strong>fill value:</strong> -1,  used if reported lon/lat are not associated with a basin (possibly on land) according to our basin index raster.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p>
<ul>
<li><p><strong>required:</strong> case</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring,  example <code class="docutils literal notranslate"><span class="pre">1999-12-31T23:59:59Z</span></code></p></li>
<li><p><strong>description:</strong> time the record measurement was made at.</p></li>
<li><p><strong>fill_value:</strong> <code class="docutils literal notranslate"><span class="pre">9999-01-01T00:00:00Z</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code></p>
<ul>
<li><p><strong>required:</strong> true in MongoDB; may be filtered out in API.</p></li>
<li><p><strong>type:</strong> array of arrays of floats, ints, strings and / or nulls</p></li>
<li><p><strong>description:</strong> a matrix of per-level measurements and flags, where <code class="docutils literal notranslate"><span class="pre">data[i][j]</span></code> represents the ith variable as ordered by <code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code>, at the jth depth or pressure level.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="generic-metadata-schema">
<h3>Generic Metadata Schema<a class="headerlink" href="#generic-metadata-schema" title="Permalink to this headline">¶</a></h3>
<p>In general, metadata records in Argovis are meant to factor out constant or infrequently-changing data from the data records. They only have one required field:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_id</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> unique record identifier referred to by the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> field in records from the corresponding data collection.</p></li>
</ul>
</li>
</ul>
<p>Besides the trivially required <code class="docutils literal notranslate"><span class="pre">_id</span></code> field, there are a set of generic metadata fields, presented in this section, that may, if required or desired, appear in the metadata or data schemas for a given dataset, depending on which choice provides the most efficient encoding for that dataset. Each dataset specified below includes the division of these fields between data and metadata.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data_info</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of arrays of floats, ints, strings and / or nulls</p></li>
<li><p><strong>description:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code>: array of strings naming the measurements, estimates or flags, in order, found in <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_info[1]</span></code>: array of strings naming per-variable metadata items (commonly things like units or long descriptions)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_info[2]</span></code>: matrix of per-variable metadata, with rows labeled by <code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code> and columns labeled by <code class="docutils literal notranslate"><span class="pre">data_info[1]</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_type</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> token indicating the general class of data</p></li>
<li><p><strong>current vocabulary:</strong> <code class="docutils literal notranslate"><span class="pre">oceanicProfile</span></code>,  <code class="docutils literal notranslate"><span class="pre">tropicalCyclone</span></code>, <code class="docutils literal notranslate"><span class="pre">drifter</span></code>, and <code class="docutils literal notranslate"><span class="pre">argo_trajectory</span></code> for point-like data, and <code class="docutils literal notranslate"><span class="pre">temperature</span></code>, <code class="docutils literal notranslate"><span class="pre">salinity</span></code>, <code class="docutils literal notranslate"><span class="pre">ocean_heat_content</span></code> and <code class="docutils literal notranslate"><span class="pre">covariance</span></code> for grids.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring,  example <code class="docutils literal notranslate"><span class="pre">1999-12-31T23:59:59Z</span></code></p></li>
<li><p><strong>description:</strong> time the record was added to Argovis; applies to both metadata records and corresponding data records.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p>
<ul>
<li><p><strong>required</strong>: true (insofar as some of its subkeys, below, are required)</p></li>
<li><p><strong>type</strong>: array of objects</p></li>
<li><p><strong>description</strong>: objects contain information about the upstream files from which this data / metadata was derived; see immediately below for keys of these objects.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source.source</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> data origin, typically used to label major project subdivisions like <code class="docutils literal notranslate"><span class="pre">argo_core</span></code>, <code class="docutils literal notranslate"><span class="pre">argo_bgc</span></code> and <code class="docutils literal notranslate"><span class="pre">argo_deep</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source.url</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> url from where the original data file from which this data and metadata was extracted can be downloaded from.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source.doi</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> DOI for this file.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source.date_updated</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring,  example <code class="docutils literal notranslate"><span class="pre">1999-12-31T23:59:59Z</span></code></p></li>
<li><p><strong>description:</strong> date and time the upstream source file for this record was last modified.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> ISO 3166-1 country code.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_center</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> entity responsible for processing this record, once received.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_warning</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> short string tokens indicating possible problems with this record.</p></li>
<li><p><strong>current vocabulary:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">degenerate_levels</span></code>: data is reported twice for a given pressure / altitude level in a way that cannot be readily resolved</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">missing_basin</span></code>: unable to determine meaningful basin code, despite having a meaningful lat / lon (edge case in basins lookup grid)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">missing_location</span></code>: one or both of longitude and latitude are missing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">missing_timestamp</span></code>: no date or time of measurement associated with this profile.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">instrument</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> string token describing the device used to make this measurement,  like <code class="docutils literal notranslate"><span class="pre">profiling_float</span></code>,  <code class="docutils literal notranslate"><span class="pre">ship_ctd</span></code> etc.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pi_name</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> name(s) of principle investigator(s).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> unique identifier for the platform or device responsible for making the measurements included in this recor, where applicable.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform_type</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> make or model of the platform.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="argo-schema-extension">
<h2>Argo Schema Extension<a class="headerlink" href="#argo-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>Argovis maintains and indexes a full sync of ifremer’s argo data, updated nightly. The Argo data and metadata collections extend and implement the generic schema as follows.</p>
<div class="section" id="generic-metadata-division">
<h3>Generic Metadata Division<a class="headerlink" href="#generic-metadata-division" title="Permalink to this headline">¶</a></h3>
<p>Argo profiles divide the generic metadata fields between data and metadata records per the following. In general, Argo metadata records describe things that are consistent or slowly changing for a particular physical float, while a data record represents an individual profile.</p>
<blockquote>
<div><ul class="simple">
<li><p>Data records:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_warning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_info</span></code></p></li>
</ul>
</li>
<li><p>Metadata records:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">data_type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_center</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instrument</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pi_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform_type</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id-construction">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id-construction" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records  <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;_&lt;cycle_number&gt;</span></code></p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;_m&lt;metadata_number&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;metadata_number&gt;</span></code> counts from 0 and is prefixed with <code class="docutils literal notranslate"><span class="pre">m</span></code> to easily distinguish it from cycle number; allows distinctions to be made if a slow-changing metadata value, like <code class="docutils literal notranslate"><span class="pre">pi_name</span></code>, changes over the lifetime of the float.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="argo-specific-data-record-fields">
<h3>Argo-Specific Data Record Fields<a class="headerlink" href="#argo-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>Argo treats <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">basin</span></code> all as required items on the data document.</p>
<p>The following fields extend the generic data record for Argo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cycle_number</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> probe cycle index</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_argoqc</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> Argo’s position QC flag</p></li>
<li><p><strong>fill value:</strong> -1</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">profile_direction</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> whether the profile was gathered as the float ascended or descended</p></li>
<li><p><strong>current vocabulary:</strong> <code class="docutils literal notranslate"><span class="pre">A</span></code> scending or <code class="docutils literal notranslate"><span class="pre">D</span></code> escending.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_argoqc</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> Argo’s date QC flag</p></li>
<li><p><strong>fill value:</strong> -1</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">vertical_sampling_scheme</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> sampling scheme for this profile.</p></li>
<li><p><strong>current vocabulary:</strong> see Argo ref table 16</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="argo-specific-metadata-record-fields">
<h3>Argo-Specific Metadata Record Fields<a class="headerlink" href="#argo-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<p>The following fields extend the generic metadata records for Argo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fleetmonitoring</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> URL for this float at <a class="reference external" href="https://fleetmonitoring.euro-argo.eu/float/">https://fleetmonitoring.euro-argo.eu/float/</a></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">oceanops</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> URL for this float at <a class="reference external" href="https://www.ocean-ops.org/board/wa/Platform">https://www.ocean-ops.org/board/wa/Platform</a></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">positioning_system</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> positioning system for this float.</p></li>
<li><p><strong>current vocabulary</strong>: see Argo ref table 9</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">wmo_inst_type</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type</strong>: string</p></li>
<li><p><strong>description:</strong> instrument type as indexed by Argo.</p></li>
<li><p><strong>current vocabulary:</strong> see Argo ref table 8</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="implementation">
<h3>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h3>
<p>Implementation of Argo’s schema and pipelines to load the data from ifremer can be found at the following links.</p>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/argo.py">https://github.com/argovis/db-schema/blob/main/argo.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/ifremer-sync">https://github.com/argovis/ifremer-sync</a></p></li>
</ul>
</div>
</div>
<div class="section" id="cchdo-schema-extension">
<h2>CCHDO Schema Extension<a class="headerlink" href="#cchdo-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>Argovis serves a selection of ship-based profiles curated by our colleagues at CCHDO. The CCHDO data and metadata collections extend and implement the generic schema as follows.</p>
<div class="section" id="id2">
<h3>Generic Metadata Division<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>CCHDO profiles divide the generic metadata fields between data and metadata records per the following. In general, CCHDO metadata records describe things that are consistent or slowly changing for a particular CCHDO cruise, while a data record represents a single profile.</p>
<blockquote>
<div><ul class="simple">
<li><p>Data records:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_warning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_info</span></code></p></li>
</ul>
</li>
<li><p>Metadata records:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">country</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_center</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">instrument</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pi_name</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id3">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">expo_&lt;expocode&gt;_sta_&lt;station&gt;_cast_&lt;cast&gt;</span></code></p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;cchdo_cruise_id&gt;_m&lt;metadata_number&gt;</span></code>,  where <code class="docutils literal notranslate"><span class="pre">&lt;metadata_number&gt;`</span></code> counts from 0 and is prefixed with <code class="docutils literal notranslate"><span class="pre">m</span></code> similar to Argo; allows distinctions to be made if a slow-changing metadata value, like <code class="docutils literal notranslate"><span class="pre">pi_name</span></code>, changes over the lifetime of the cruise.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cchdo-specific-data-record-fields">
<h3>CCHDO-Specific Data Record Fields<a class="headerlink" href="#cchdo-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>CCHDO treats <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">basin</span></code> all as required items on the data document.</p>
<p>The following fields extend the generic data records for CCHDO:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">station</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cast</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cchdo-specific-metadata-record-fields">
<h3>CCHDO-Specific Metadata Record Fields<a class="headerlink" href="#cchdo-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<p>The following fields extend the generic metadata records for CCHDO:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expocode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cchdo_cruise_id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">woce_lines</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id4">
<h3>Implementation<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Implementation of CCHDO’s schema and pipelines to load the data from CCHDO can be found at the following links.</p>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/cchdo.py">https://github.com/argovis/db-schema/blob/main/cchdo.py</a></p></li>
<li><p>Upload pipeline: original from CCHDO: <a class="reference external" href="https://github.com/cchdo/argovis_convert_netcdf_to_json">https://github.com/cchdo/argovis_convert_netcdf_to_json</a>; also see fork and branch <a class="reference external" href="https://github.com/BillMills/argovis_convert_netcdf_to_json/tree/2022Q3">https://github.com/BillMills/argovis_convert_netcdf_to_json/tree/2022Q3</a> for schema compliance and mongo upload.</p></li>
</ul>
</div>
</div>
<div class="section" id="drifter-schema-extension">
<h2>Drifter Schema Extension<a class="headerlink" href="#drifter-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>Argovis indexes a subset of the hourly dataset from the <a class="reference external" href="https://www.aoml.noaa.gov/phod/gdp/index.php">NOAA Global Drifter Program</a>, version 2.00 (beta pre-release) (<a class="reference external" href="http://dx.doi.org/10.1002/2016JC011716">Elipot et al. 2016</a>, <a class="reference external" href="https://arxiv.org/abs/2201.08289v1">Elipot et al. 2022 arXiv preprint</a>). See <a class="reference external" href="https://github.com/argovis/drifter-sync">https://github.com/argovis/drifter-sync</a> for data parsing and loading.</p>
<p>Global Drifter Program data and metadata collections extend and implement the generic schema as follows.</p>
<div class="section" id="id5">
<h3>Generic Metadata Division<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Global Drifter Program measurements place all metadata fields in their metadata records; drifter data records correspond exactly to generic data records, while metadata records are per platform.</p>
</div>
<div class="section" id="id6">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;_&lt;measurement_index&gt;</span></code></p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="drifter-specific-data-record-fields">
<h3>Drifter-Specific Data Record Fields<a class="headerlink" href="#drifter-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>The drifter collectoin treats <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">basin</span></code> all as required items on the data document.</p>
<p>Otherwise, drifter data records are exactly the generic data record specification.</p>
</div>
<div class="section" id="drifter-specific-metadata-record-fields">
<h3>Drifter-Specific Metadata Record Fields<a class="headerlink" href="#drifter-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rowsize</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> number of obs for this trajectory</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">WMO</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong>  World Meteorological Organization buoy identification number</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">expno</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> experiment number</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">deploy_date</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong> Deployment date and time</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">deploy_lon</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> Deployment longitude</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">deploy_lat</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> Deployment latitude</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_date</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong>  End date and time</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_lon</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> End longitude</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_lat</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> End longitude</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">drogue_lost_date</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong> Date of drogue loss (Null=drogue still attached; “1970-01-01T00:00:00Z”=drogue status uncertain from beginning)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">typedeath</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> Type of death (0=buoy still alive, 1=buoy ran aground, 2=picked up by vessel, 3=stop transmitting, 4=sporadic transmissions, 5=bad batteries, 6=inactive status)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">typebuoy</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> ‘Buoy type (see <a class="reference external" href="https://www.aoml.noaa.gov/phod/dac/dirall.html">https://www.aoml.noaa.gov/phod/dac/dirall.html</a>)’</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id7">
<h3>Implementation<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/drifters.py">https://github.com/argovis/db-schema/blob/main/drifters.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/drifter-sync">https://github.com/argovis/drifter-sync</a></p></li>
</ul>
</div>
</div>
<div class="section" id="tropical-cyclone-schema-extension">
<h2>Tropical Cyclone Schema Extension<a class="headerlink" href="#tropical-cyclone-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>HURDAT and JTWC tropical cyclone data is indexed by Argovis; TC data and metadata collections extend and implement the generic schema as follows.</p>
<div class="section" id="id9">
<h3>Generic Metadata Division<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Tropical cyclone records place all generic metadata fields in their metadata records.</p>
</div>
<div class="section" id="id10">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Data records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;TCID&gt;_&lt;YYYY&gt;&lt;MM&gt;&lt;DD&gt;&lt;HH&gt;&lt;MM&gt;&lt;SS&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;TCID&gt;</span></code> is the ID of the cyclone measurement from the upstream data source.</p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;TCID&gt;</span></code></p></li>
</ul>
</div>
<div class="section" id="tc-specific-data-record-fields">
<h3>TC-Specific Data Record Fields<a class="headerlink" href="#tc-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>Tropical cyclones treat <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">basin</span></code> all as required items on the data document. Specific data record fields are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">class</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">record_identifier</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_warning</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> object</p></li>
<li><p><strong>description:</strong> key-value pairs indicating warnings (keys) and further information about each (values)</p></li>
<li><p><strong>current vocabulary (keys):</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">duplicate</span></code>: multiple records with the same basin, cyclone number, and timestamp were found in the upstream data. In these cases, the first such record is populated in Argovis and the rest are discarded; this key lists links to the upstream files that contain the discarded duplicates.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="tc-specific-metadata-record-fields">
<h3>TC-Specific Metadata Record Fields<a class="headerlink" href="#tc-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num</span></code></p></li>
</ul>
</div>
<div class="section" id="id11">
<h3>Implementation<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Implementation of tropical cyclone schema and pipelines to load the data from source CSVs can be found at the following links.</p>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/tc.py">https://github.com/argovis/db-schema/blob/main/tc.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/tc-sync">https://github.com/argovis/tc-sync</a></p></li>
</ul>
</div>
</div>
<div class="section" id="gridded-product-schema-extension">
<h2>Gridded Product Schema Extension<a class="headerlink" href="#gridded-product-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>Argovis includes the total temperature and salinity grids from <a class="reference external" href="https://sio-argo.ucsd.edu/RG_Climatology.html">Roemmich-Gilson</a>, the ocean heat content grid described at <a class="reference external" href="https://zenodo.org/record/6131625">https://zenodo.org/record/6131625</a>, and the <a class="reference external" href="https://glodap.info/index.php/mapped-data-product/">GLODAP v2.2016b mapped data product</a>. These gridded product data and metadata collections extend, implement and modify the generic schema as follows (see below for other, bespoke grids).</p>
<div class="section" id="id12">
<h3>Generic Metadata Division<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>Gridded products place <code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, and <code class="docutils literal notranslate"><span class="pre">source</span></code> in their metadata documents.</p>
</div>
<div class="section" id="id13">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;yyyymmddhhmmss&gt;_&lt;longitude&gt;_&lt;latitude&gt;</span></code></p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>:</p>
<ul>
<li><p>For RG: <code class="docutils literal notranslate"><span class="pre">rg09_&lt;temperature</span> <span class="pre">|</span> <span class="pre">salinity&gt;_&lt;yyymm</span> <span class="pre">of</span> <span class="pre">originating</span> <span class="pre">file&gt;_Total</span></code></p></li>
<li><p>For KG: <code class="docutils literal notranslate"><span class="pre">kg21_ohc15to300</span></code></p></li>
<li><p>For GLODAP: <code class="docutils literal notranslate"><span class="pre">glodapv2.2016b</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="grid-specific-data-record-fields">
<h3>Grid-Specific Data Record Fields<a class="headerlink" href="#grid-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>Gridded data does not define any new data record fields. Do note however that gridded data documents often contain more than one key in their <code class="docutils literal notranslate"><span class="pre">metadata</span></code> field. As noted above, these correspond in order to the different grids listed in <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p>
</div>
<div class="section" id="grid-specific-metadata-record-fields">
<h3>Grid-Specific Metadata Record Fields<a class="headerlink" href="#grid-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">levels</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of floats</p></li>
<li><p><strong>description:</strong> Pressure or depth levels corresponding to each list of measurements in <code class="docutils literal notranslate"><span class="pre">data</span></code>. Note the same spectrum of levels applies to all measurements in <code class="docutils literal notranslate"><span class="pre">data</span></code>, as grids are required to have the same level spectrum in order to share a data document.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">level_units</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> units associated with the values in the <code class="docutils literal notranslate"><span class="pre">levels</span></code> array, typically dbar or m.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lattice</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> object</p></li>
<li><p><strong>description:</strong> describes the shape and extent of the longitude / latitude grid data has been interpolated to. All subfields are required.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lattice.center</span></code></p>
<ul>
<li><p><strong>type:</strong> array of two floats</p></li>
<li><p><strong>description:</strong> [longitude, latitude] of a point on the grid close to [0,0].</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lattice.spacing</span></code></p>
<ul>
<li><p><strong>type:</strong> array of two floats</p></li>
<li><p><strong>description:</strong> [longitude stride, latitude stride] between points on the grid</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">[min</span> <span class="pre">/</span> <span class="pre">max](Lon</span> <span class="pre">/</span> <span class="pre">Lat)</span></code></p>
<ul>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> [minimum / maximum] (longitude / latitude) seen in the dataset</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">snr</span></code> (GLODAP only)</p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> JSON object keyed by GLODAP variable</p></li>
<li><p><strong>description:</strong> Signal to noise ratio reported for this variable.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cl</span></code> (GLODAP only)</p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> JSON object keyed by GLODAP variable</p></li>
<li><p><strong>description:</strong> Correlation length, units of degrees north. Comment from the GLODAP upstream data: “Note that the [sic]correlation length is scaled to be 2x this number in the zonal direction, in order to account for the typically stronger flow zonally than meridionally in the world oceans.”</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Implementation<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/grids.py">https://github.com/argovis/db-schema/blob/main/grids.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/grid-sync">https://github.com/argovis/grid-sync</a></p></li>
</ul>
</div>
</div>
<div class="section" id="easy-ocean-gridded-schema-extension">
<h2>Easy Ocean Gridded Schema Extension<a class="headerlink" href="#easy-ocean-gridded-schema-extension" title="Permalink to this headline">¶</a></h2>
<p>The Easy Ocean grid is indexed by Argovis; Easy Ocean data and metadata collections extend and implement the generic schema as follows.</p>
<div class="section" id="id15">
<h3>Generic Metadata Division<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>Easy Ocean places all generic metadata on the data document, save <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, and <code class="docutils literal notranslate"><span class="pre">country</span></code>, which is replaced by <code class="docutils literal notranslate"><span class="pre">section_countries</span></code> on the data document.</p>
</div>
<div class="section" id="id16">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">woce_&lt;WOCE_line&gt;_date_&lt;YYYYMMDD&gt;_lat_&lt;lat&gt;_lon_&lt;lon&gt;</span></code>, where decimals in lat and lon are hyphenated, ie 54.3 is written as 54-3 in the id.</p></li>
<li><p>Metadata records <code class="docutils literal notranslate"><span class="pre">_id</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;WOCE</span> <span class="pre">line&gt;</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="easy-ocean-specific-data-record-fields">
<h3>Easy Ocean-Specific Data Record Fields<a class="headerlink" href="#easy-ocean-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">section_expocodes</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> Expocodes of contributing sections.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">section_start_date</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong> date this section began</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">section_end_date</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong> date this section concluded</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">woce_lines</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> WOCE lines present</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">references</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> reference for this data</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_created</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> ISO 8601 UTC datestring</p></li>
<li><p><strong>description:</strong></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">section_countries</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> country codes for contributing countries</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">positioning_system</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> positioning system used for this section</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="easy-ocean-specific-metadata-record-fields">
<h3>Easy Ocean-Specific Metadata Record Fields<a class="headerlink" href="#easy-ocean-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">occupancies</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of objects</p></li>
<li><p><strong>description:</strong> array of data objects describing each occupancy of the WOCE line.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">occupancies[x].varying_direction</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> which direction, lat or lon, is varying in this Easy Ocean entry</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">occupancies[x].static_direction</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> string</p></li>
<li><p><strong>description:</strong> which direction, lat or lon, is interpolated to constant in this Easy Ocean entry</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">occupancies[x].expocodes</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> expocodes for this occupancy</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">occupancies[x].time_boundaries</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of two ISO 8601 UTC datestrings</p></li>
<li><p><strong>description:</strong> start and end times for this occupancy.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Implementation<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>Implementation of Easy Ocean schema and pipelines to load the data from source CSVs can be found at the following links.</p>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/easyocean.py">https://github.com/argovis/db-schema/blob/main/easyocean.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/convert_easy_ocean">https://github.com/argovis/convert_easy_ocean</a></p></li>
</ul>
</div>
</div>
<div class="section" id="argone-argo-float-forecast-data">
<h2>ARGONE Argo float forecast data<a class="headerlink" href="#argone-argo-float-forecast-data" title="Permalink to this headline">¶</a></h2>
<p>Argovis includes a tabulation of forecasts of Argo float locations based on ARGONE (link / DOI forthcoming).</p>
<div class="section" id="id18">
<h3>Generic Metadata Division<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, and <code class="docutils literal notranslate"><span class="pre">source</span></code> all live on the argone metadata document.</p>
</div>
<div class="section" id="id19">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;origin_lon&gt;_&lt;origin_lat&gt;_&lt;forecast_lon&gt;_&lt;forecast_lat&gt;</span></code></p></li>
<li><p>Metadata records: there is only one for the entire dataset, <code class="docutils literal notranslate"><span class="pre">argone</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="argone-specific-data-record-fields">
<h3>ARGONE-specific data record fields<a class="headerlink" href="#argone-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_forecast</span></code></p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> geojson Point</p></li>
<li><p><strong>description:</strong> forecast location for this record</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="argone-specific-metadata-record-fields">
<h3>ARGONE-specific metadata record fields<a class="headerlink" href="#argone-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">levels</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> array of floats</p></li>
<li><p><strong>description:</strong> a single entry, <code class="docutils literal notranslate"><span class="pre">[0]</span></code>, indicating this is all surface data</p></li>
</ul>
</li>
</ul>
<p>Also note <code class="docutils literal notranslate"><span class="pre">data_info[0]</span></code> for ARGONE data indicates forecast length in days; the first entry indicates the probability a float will move from <code class="docutils literal notranslate"><span class="pre">geolocation</span></code> to <code class="docutils literal notranslate"><span class="pre">geolocation_forecast</span></code> in 90 days, for example.</p>
</div>
<div class="section" id="id20">
<h3>Implementation<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/argone.py">https://github.com/argovis/db-schema/blob/main/argone.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/ARGONE">https://github.com/argovis/ARGONE</a></p></li>
</ul>
</div>
</div>
<div class="section" id="argo-trajectory-data">
<h2>Argo trajectory data<a class="headerlink" href="#argo-trajectory-data" title="Permalink to this headline">¶</a></h2>
<p>Argovis includes estimates of Argo float trajectories from <a class="reference external" href="https://doi.org/10.6075/J0FQ9WS6">https://doi.org/10.6075/J0FQ9WS6</a>.</p>
<div class="section" id="id21">
<h3>Generic Metadata Division<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, and <code class="docutils literal notranslate"><span class="pre">source</span></code> all live on the trajectories metadata documents.</p>
</div>
<div class="section" id="id22">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;_&lt;cycle_number&gt;</span></code></p></li>
<li><p>Metadata records: <code class="docutils literal notranslate"><span class="pre">&lt;platform&gt;_m&lt;metadata_number&gt;</span></code>, analogos to Argo metadata</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="argo-trajectory-specific-data-record-fields">
<h3>Argo trajectory-specific data record fields<a class="headerlink" href="#argo-trajectory-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cycle_number</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> int</p></li>
<li><p><strong>description:</strong> probe cycle index</p></li>
</ul>
</li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">geolocation_*</span></code> and <code class="docutils literal notranslate"><span class="pre">timestamp_*</span></code> data fields are all required; all geolocations have type geojson Point, and all timestamps have type datetime.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_descending</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_descending</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_ascending</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_ascending</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_descending_transmitted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_descending_transmitted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_ascending_transmitted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_ascending_transmitted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation_midpoint_transmitted</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timestamp_midpoint_transmitted</span></code></p></li>
</ul>
<p>Note that Argovis’ <code class="docutils literal notranslate"><span class="pre">geolocation</span></code> corresponds to the original files’ <code class="docutils literal notranslate"><span class="pre">LONGITUDE_</span></code> and <code class="docutils literal notranslate"><span class="pre">LATITUDE_MIDPOINT</span></code>, and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> corresponds to the upstream <code class="docutils literal notranslate"><span class="pre">JULD_MIDPOINT</span></code>.</p>
</div>
<div class="section" id="argo-trajectory-specific-metadata-record-fields">
<h3>Argo trajectory-specific metadata record fields<a class="headerlink" href="#argo-trajectory-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">platform</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">positioning_system_flag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sensor_type_flag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mission_flag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extrapolation_flag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">positioning_system</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform_type</span></code></p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Implementation<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema implementation and indexing: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/trajectories.py">https://github.com/argovis/db-schema/blob/main/trajectories.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/argo_trajectories">https://github.com/argovis/argo_trajectories</a></p></li>
</ul>
</div>
</div>
<div class="section" id="generic-timeseries-schema">
<h2>Generic Timeseries Schema<a class="headerlink" href="#generic-timeseries-schema" title="Permalink to this headline">¶</a></h2>
<p>The generic point schema described above and its specific instances works well for data that can be feasilby captured as documents with unique latitude, longitude, and timestamps. However, when considering higher-resolution datasets, indexing independent documents for each such coordinate triple can dramatically exceed the scale of computing resources the point data above requires; for example, while Argo has roughly 3 million such documents to consider at the time of writing, a global, quarter-degree grid measured daily for 30 years (a typical scale for satellite products) would have on the order of <em>10 billion</em> such documents. In order to represent, index and serve such high-resolution grids on similar compute infrastructure to the point data, we make a minor modification to the generic point schema to form the <em>generic timeseries schema</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Vectors in the <code class="docutils literal notranslate"><span class="pre">data</span></code> object represent surface measurements, estimates or flags as an ordered timeseries.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> document no longer has a single <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> key, as the data within corresponds to many timestamps.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">metadata</span></code> or <code class="docutils literal notranslate"><span class="pre">data</span></code> document must bear a <code class="docutils literal notranslate"><span class="pre">timeseries</span></code> key, which is an ordered list of timestamps corresponding to the times associated with each element in the <code class="docutils literal notranslate"><span class="pre">data</span></code> vectors.</p></li>
</ul>
</div></blockquote>
<p>The observant reader will notice that this is very similar to the gridded products which have a <code class="docutils literal notranslate"><span class="pre">levels</span></code> key indicating the model depths for each entry in their <code class="docutils literal notranslate"><span class="pre">data</span></code> vectors. All timeseries metadata documents also include a <code class="docutils literal notranslate"><span class="pre">lattice</span></code> key that is interepreted identically to the lattice metadata for gridded products. All other aspects of the generic schema remain consistent between point and timeseries datasets.</p>
</div>
<div class="section" id="noaa-sea-surface-temperature-timeseries">
<h2>NOAA sea surface temperature timeseries<a class="headerlink" href="#noaa-sea-surface-temperature-timeseries" title="Permalink to this headline">¶</a></h2>
<p>Argovis represents the satellite grid of sea surface temperatures from <a class="reference external" href="https://psl.noaa.gov/data/gridded/data.noaa.oisst.v2.html">https://psl.noaa.gov/data/gridded/data.noaa.oisst.v2.html</a> as a timeseries dataset.</p>
<div class="section" id="id24">
<h3>Generic Metadata Division<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">timeseries</span></code> all live on the SST metadata documents.</p>
</div>
<div class="section" id="id25">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;longitude&gt;_&lt;latitude&gt;</span></code></p></li>
<li><p>Metadata records: <code class="docutils literal notranslate"><span class="pre">noaa-oi-sst-v2</span></code> is the sole metadata document for this collection.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="noaa-sst-specific-data-record-fields">
<h3>NOAA sst-specific data record fields<a class="headerlink" href="#noaa-sst-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="noaa-sst-specific-metadata-record-fields">
<h3>NOAA sst-specific metadata record fields<a class="headerlink" href="#noaa-sst-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id26">
<h3>Implementation<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/timeseries.py">https://github.com/argovis/db-schema/blob/main/timeseries.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/noaa-sst">https://github.com/argovis/noaa-sst</a></p></li>
</ul>
</div>
</div>
<div class="section" id="copernicus-sea-level-anomaly-timeseries">
<h2>Copernicus sea level anomaly timeseries<a class="headerlink" href="#copernicus-sea-level-anomaly-timeseries" title="Permalink to this headline">¶</a></h2>
<p>Argovis represents the satellite grid of sea level anomaly from <a class="reference external" href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/satellite-sea-level-global">https://cds.climate.copernicus.eu/cdsapp#!/dataset/satellite-sea-level-global</a> as a timeseries dataset. Note this data is averaged down to weekly averages from the daily dataset; averaging periods are selected to align with the NOAA SST timeseries.</p>
<div class="section" id="id27">
<h3>Generic Metadata Division<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">timeseries</span></code> all live on the SLA metadata documents.</p>
</div>
<div class="section" id="id28">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;longitude&gt;_&lt;latitude&gt;</span></code></p></li>
<li><p>Metadata records: <code class="docutils literal notranslate"><span class="pre">copernicusSLA</span></code> is the sole metadata document for this collection.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="copernicus-sla-specific-data-record-fields">
<h3>Copernicus sla-specific data record fields<a class="headerlink" href="#copernicus-sla-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="copernicus-sla-specific-metadata-record-fields">
<h3>Copernicus sla-specific metadata record fields<a class="headerlink" href="#copernicus-sla-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id29">
<h3>Implementation<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/timeseries.py">https://github.com/argovis/db-schema/blob/main/timeseries.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/copernicus-ssh">https://github.com/argovis/copernicus-ssh</a></p></li>
</ul>
</div>
</div>
<div class="section" id="remss-ccmp-wind-vector-timeseries">
<h2>REMSS CCMP wind vector timeseries<a class="headerlink" href="#remss-ccmp-wind-vector-timeseries" title="Permalink to this headline">¶</a></h2>
<p>Argovis represents the satellite grid of wind vector data from <a class="reference external" href="https://www.remss.com/measurements/ccmp/">https://www.remss.com/measurements/ccmp/</a> as a timeseries dataset. Note this data is averaged down to weekly averages from the 6-hourly dataset; averaging periods are selected to align with the NOAA SST timeseries.</p>
<div class="section" id="id31">
<h3>Generic Metadata Division<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">timeseries</span></code> all live on the CCMP wind metadata documents.</p>
</div>
<div class="section" id="id32">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;longitude&gt;_&lt;latitude&gt;</span></code></p></li>
<li><p>Metadata records: <code class="docutils literal notranslate"><span class="pre">ccmpwind</span></code> is the sole metadata document for this collection.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="ccmp-wind-specific-data-record-fields">
<h3>CCMP wind-specific data record fields<a class="headerlink" href="#ccmp-wind-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="ccmp-wind-specific-metadata-record-fields">
<h3>CCMP wind-specific metadata record fields<a class="headerlink" href="#ccmp-wind-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
<div class="section" id="id33">
<h3>Implementation<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/timeseries.py">https://github.com/argovis/db-schema/blob/main/timeseries.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/ccmp_parse">https://github.com/argovis/ccmp_parse</a></p></li>
</ul>
</div>
</div>
<div class="section" id="generic-extended-objects-schema">
<h2>Generic Extended Objects Schema<a class="headerlink" href="#generic-extended-objects-schema" title="Permalink to this headline">¶</a></h2>
<p>The generic point schema described above and its specific instances works well for data localized to a specific latitude and longitude as well as timestamp. However, when considering phenomena with large spatial extent like weather events, a point-based schema can’t on its own capture these regions. In order to represent, index and serve data with large phenomenological extent, we make a minor modification to the generic point schema to form the <em>generic extended objects schema</em>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geolocation</span></code> in the <code class="docutils literal notranslate"><span class="pre">data</span></code> documents is a geoJSON MultiPolygon object that represents the boundaries of the phenomenon, rather than a single geoJSON Point object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">basin</span></code> is replaced with <code class="docutils literal notranslate"><span class="pre">basins</span></code>, defined similarly but as a list of such tags, in order to accommodate objects that extend to more than one ocean basin.</p></li>
</ul>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">data</span></code> key in the <code class="docutils literal notranslate"><span class="pre">data</span></code> documents for extended objects works exactly the same as it does for other datasets, but will always include longitude and latitude measurements; these values and the measurement values associated by index with them from the other data vectors capture localized data in the interior of the phenomenological boundary, such as integrated water vapor transport at specific locations inside an atmospheric river.</p>
</div></blockquote>
</div>
<div class="section" id="atmospheric-river-extended-objects">
<h2>Atmospheric river extended objects<a class="headerlink" href="#atmospheric-river-extended-objects" title="Permalink to this headline">¶</a></h2>
<p>Argovis represents the atmospheric river (AR) climatology presented in <a class="reference external" href="https://doi.org/10.1175/MWR-D-13-00168.1">https://doi.org/10.1175/MWR-D-13-00168.1</a> as an extended object dataset.</p>
<div class="section" id="id35">
<h3>Generic Metadata Division<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data_type</span></code>, <code class="docutils literal notranslate"><span class="pre">data_info</span></code>, <code class="docutils literal notranslate"><span class="pre">date_updated_argovis</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span></code>  all live on the AR metadata documents.</p>
</div>
<div class="section" id="id36">
<h3><code class="docutils literal notranslate"><span class="pre">_id</span></code> construction<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Data records: <code class="docutils literal notranslate"><span class="pre">&lt;YYYY&gt;&lt;MM&gt;&lt;DD&gt;&lt;decimal</span> <span class="pre">hour&gt;_&lt;index</span> <span class="pre">of</span> <span class="pre">phenomenon</span> <span class="pre">at</span> <span class="pre">this</span> <span class="pre">timestep&gt;</span></code></p></li>
<li><p>Metadata records: <code class="docutils literal notranslate"><span class="pre">ar</span></code> is the sole metadata document for this collection.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="ar-specific-data-record-fields">
<h3>AR-specific data record fields<a class="headerlink" href="#ar-specific-data-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> array of strings</p></li>
<li><p><strong>description:</strong> flags of possible pathologies from phenomenological boundaty construction</p></li>
<li><p><strong>current vocabulary:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">annulus</span></code>: this shape wraps around the entire globe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dateline</span></code>: this shape crosses the dateline.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">holes</span></code>: this shape has interior holes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">north_pole</span></code> and <code class="docutils literal notranslate"><span class="pre">south_pole</span></code>: this shape covers the respective pole.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">noise_added</span></code>: in rare cases, a MultiPolygon will fail to index in mongodb due to the database bug <a class="reference external" href="https://jira.mongodb.org/browse/SERVER-52928">https://jira.mongodb.org/browse/SERVER-52928</a>. In this case, the shape is randomly shifted by much less than the resolution of the original climatology.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manually_corrected</span></code>: in cases of very large ARs, typically annular ARs wrapping the planet near the equator, it can be difficult to correctly define the interior of such a region in MongoDB. In these cases, we place an artificial ‘seam’ in the annulus that is much smaller than the resolution of the original grid and therefore won’t affect geolocation searches, but which makes it easier to describe and index these phenomenological boundaries.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">true_geolocation</span></code></p>
<ul>
<li><p><strong>required:</strong> false</p></li>
<li><p><strong>type:</strong> geojson MultiPolygon</p></li>
<li><p><strong>description:</strong> the phenomenological boundary automatically generated by the boundary detection algorithm in <a class="reference external" href="https://github.com/argovis/argovis_helpers">https://github.com/argovis/argovis_helpers</a>; added when <code class="docutils literal notranslate"><span class="pre">noise_added</span></code> or <code class="docutils literal notranslate"><span class="pre">manually_corrected</span></code> flags are present to provide the unmodified geolocation.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="ar-specific-metadata-record-fields">
<h3>AR-specific metadata record fields<a class="headerlink" href="#ar-specific-metadata-record-fields" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lattice</span></code></p>
<ul>
<li><p><strong>required:</strong> true</p></li>
<li><p><strong>type:</strong> object</p></li>
<li><p><strong>description:</strong> describes the shape and extent of the longitude / latitude grid data has been interpolated to. All subfields are required.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lattice.center</span></code></p>
<ul>
<li><p><strong>type:</strong> array of two floats</p></li>
<li><p><strong>description:</strong> [longitude, latitude] of a point on the grid close to [0,0].</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lattice.spacing</span></code></p>
<ul>
<li><p><strong>type:</strong> array of two floats</p></li>
<li><p><strong>description:</strong> [longitude stride, latitude stride] between points on the grid</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">[min</span> <span class="pre">/</span> <span class="pre">max](Lon</span> <span class="pre">/</span> <span class="pre">Lat)</span></code></p>
<ul>
<li><p><strong>type:</strong> float</p></li>
<li><p><strong>description:</strong> [minimum / maximum] (longitude / latitude) seen in the dataset</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id37">
<h3>Implementation<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Schema: <a class="reference external" href="https://github.com/argovis/db-schema/blob/main/extended.py">https://github.com/argovis/db-schema/blob/main/extended.py</a></p></li>
<li><p>Upload pipeline: <a class="reference external" href="https://github.com/argovis/arShapes">https://github.com/argovis/arShapes</a></p></li>
</ul>
<p><em>Last reviewed 2024-04-11</em></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="db_ops.html" class="btn btn-neutral float-right" title="Database Resourcing &amp; Deployment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting started with Argovis’ data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2024, Argovis Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>